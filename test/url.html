<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
	<head>
		<title>URL Test</title>
		
		<link rel="stylesheet" type="text/css" href="./css/test.css" />
		
		<script type="application/javascript" src="../lib/URL.js"></script>
		
		<script type="text/javascript">
			window.addEventListener('DOMContentLoaded', function() {
				debugger;
				
				var body = document.querySelector('body');
				
				var input = document.createElement('input');
				input.setAttribute('type', "text");
				input.value = "http://files.localnet/URL/test/url.html";
				input.addEventListener('keyup', onKeyUp, false);
				body.appendChild(input);
				
				var output = document.createElement('div');
				body.appendChild(output);
				
				function onKeyUp() {
					var strurl = input.value;
					
					for (var node = output.firstChild; node; node = output.firstChild) output.removeChild(node);
					
					node = document.createElement('p');
					
					try {
						var scheme = URLSchemeComponent.StringURL(strurl);
						var name = URLNameComponent.StringURL(strurl);
						var path = URLPathComponent.StringURL(strurl);
						
						if (scheme.valid) {
							var child = document.createElement('span');
							child.className = "scheme";
							child.textContent = scheme;
							node.appendChild(child);
							
							node.appendChild(document.createTextNode(":"));
						}
						
						if (name.valid) {
							node.appendChild(document.createTextNode("//"));
							
							child = document.createElement('span');
							child.className = "name";
							child.textContent = name;
							node.appendChild(child);
						}
						
						if (path.segment.length) {
							child = document.createElement('span');
							child.className = "path";
							child.textContent = path;
							node.appendChild(child);
						}
						
						if (node.childNodes.length) {
							node.appendChild(document.createTextNode(" parsed."));
							output.appendChild(node);
							
							return;
						}
						
						child = document.createElement('span');
						child.className = "none";
						child.textContent = "empty";
						node.appendChild(child);
						output.appendChild(node);
						
						return;
					} catch(err) {
						node = document.createElement('p');
						
						child = document.createElement('span');
						child.className = 'string';
						child.textContent = strurl;
						node.appendChild(child);
						
						node.appendChild(document.createTextNode(" not parsed. reason: "));
						
						child = document.createElement('span');
						child.className = 'error';
						child.textContent = err;
						node.appendChild(child);
						
						node.appendChild(document.createTextNode("."));
					}
					
					output.appendChild(node);
				}
				
				
				onKeyUp(null);
			}, false);
		</script>
	</head>
	
	<body></body>
</html>